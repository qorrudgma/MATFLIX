<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.dao.RecipeCommentDAO">
    
    <!-- 댓글 작성 -->
    <insert id="insert_recipe_comment">
		insert into recipe_comment(recipe_id
			 , mf_no 	
			 , comment_content
			 , parentCommentNo)
		values(#{recipe_id},#{mf_no},#{comment_content},#{parentCommentNo})
    </insert>
    
    <!-- 댓글 리스트 -->
    <select id="all_recipe_comment" resultType="com.boot.dto.RecipeCommentDTO">
		SELECT rc.comment_no
		     , rc.recipe_id
		     , rc.mf_no
		     , rc.comment_content
		     , rc.parentCommentNo
		     , rc.deleted
		     , rc.created_at
		     , u.mf_nickname
    	  FROM recipe_comment rc
          JOIN matflix u
            ON rc.mf_no = u.mf_no
         WHERE rc.recipe_id = #{recipe_id}
           AND rc.deleted = 0
         ORDER BY rc.comment_no ASC
    </select>

</mapper>