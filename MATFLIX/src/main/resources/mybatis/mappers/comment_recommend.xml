<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.dao.CommentRecommendDAO">
    
    <!-- 댓글 추천 -->
    <insert id="add_comment_recommend">
		insert into comment_recommend(commentNo, mf_no)
		values (#{commentNo},#{mf_no})
    </insert>
    
    <!-- 댓글 추천 취소 -->
    <delete id="minus_comment_recommend">
    	delete from comment_recommend
 		 where commentNo=#{commentNo} and mf_no=#{mf_no}
    </delete>

    <!-- 댓글 삭제로 인한 추천 취소 -->
    <delete id="delete_comment">
    	delete from comment_recommend
 		 where commentNo=#{commentNo}
    </delete>

    <!-- 댓글 추천 유무 -->
    <select id="comment_yn" resultType="int">
    	select count(*)
    	  from comment_recommend
 		 where commentNo=#{commentNo} and mf_no=#{mf_no}
    </select>

    <!-- 게시글 삭제로 인한 추천 취소 -->
    <delete id="delete_board_comment">
	    delete cr
		  from comment_recommend cr
		  join board_comment bc
		    on cr.commentNo = bc.commentNo
		 where bc.boardNo = #{boardNo}
    </delete>
    
</mapper>